{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Deploy a devfile registry to allow access to the devfile stacks that"," ","provide templates for containerized development."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["To use the devfile Operator to deploy a devfile registry, use:"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Operator Lifecycle Manager (OLM)"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Devfile registry Helm chart"]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"prerequisites"},"children":["Prerequisites"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A built devfile registry container image. To build your own devfile"," ","registry, see ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./building-a-custom-devfile-registry"},"children":["building a custom devfile registry"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["If you do not have publicly signed certificates for your cluster,"," ","disable TLS for the devfile registry so that you can use the devfile"," ","registry with ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["odo"]},"."]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"deploying-a-devfile-registry-with-operator-lifecycle-manager"},"children":["Deploying a devfile registry with Operator Lifecycle Manager"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["When you have Operator Lifecycle Manager (OLM) installed on your"," ","cluster, use the devfile registry Operator to install and deploy a"," ","devfile registry."]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Install the devfile registry Operator:"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Install"," ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://github.com/operator-framework/operator-lifecycle-manager"},"children":["OLM"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Download and install the ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://mirror.openshift.com/pub/openshift-v4/clients/operator-sdk/latest/"},"children":["operator-sdk"," ","CLI"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Run the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["operator-sdk"]}," command to install the devfile registry"," ","Operator:"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"shell-session"},"children":["$ operator-sdk run bundle quay.io/devfile/registry-operator-bundle:next\n"]}]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Deploy the devfile registry:"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["On an OpenShift cluster, run:"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"shell-session"},"children":["$ cat <<EOF | oc apply -f -\napiVersion: registry.devfile.io/v1alpha1\nkind: DevfileRegistry\nmetadata:\n    name: devfile-registry\nspec:\n    devfileIndexImage: quay.io/devfile/devfile-index:next\nEOF\n"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["On a Kubernetes cluster, run:"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"shell-session"},"children":["$ cat <<EOF | kubectl apply -f -\napiVersion: registry.devfile.io/v1alpha1\nkind: DevfileRegistry\nmetadata:\n    name: devfile-registry\nspec:\n    devfileIndexImage: quay.io/devfile/devfile-index:next\n        tls:\n    enabled: false\n    k8s:\n    ingressDomain: $INGRESS_DOMAIN\nEOF\n"]}]}]}]}]},{"$$mdtype":"Tag","name":"Callout","attributes":{"title":"Note!","type":"note"},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Regardless of the cluster, if you are deploying your own devfile"," ","registry, change the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["devfileIndexImage"]}," field to the container image"," ","that you built."]}]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"additional-resources"},"children":["Additional resources"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For information on installing the devfile registry Operator, see"," ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://github.com/devfile/registry-operator"},"children":["devfile registry"," ","Operator"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For information on installing OLM on your Kubernetes cluster, see"," ","the ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://olm.operatorframework.io/docs/getting-started/"},"children":["OLM quick start"," ","guide"]},"."]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"deploying-a-devfile-registry-with-helm-chart"},"children":["Deploying a devfile registry with Helm chart"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["If the Operator Lifecycle Manager (OLM) is not installed on your"," ","Kubernetes cluster, use the devfile registry Helm chart in order to use"," ","the devfile registry Operator to deploy the devfile registry."]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"procedure-2"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Clone the repository containing the Helm chart:"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"shell-session"},"children":["$ git clone https://github.com/devfile/registry-support\n"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Navigate to the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["deploy/chart/devfile-registry"]}," directory."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Open the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["values.yaml"]}," file in an editor and make the following"," ","changes:"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Set ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["devfileIndex.image"]}," to the image containing your devfile"," ","stacks."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Set ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["devfileIndex.tag"]}," to the image tag for your devfile index"," ","image."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["If installing on Kubernetes, set ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["global.Ingress.domain"]}," to the"," ","Ingress domain of your cluster."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["If installing on OpenShift, set ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["global.isOpenShift"]}," to ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["true"]},"."]}]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Run ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["helm install devfile-registry ./"]}," to install the Helm chart."]}]}]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"additional-resources-2"},"children":["Additional resources"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["For information on the devfile registry Helm chart, see the"," ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://github.com/devfile/registry-support/blob/master/deploy/chart/devfile-registry/README.md"},"children":["registry Helm chart Git repository"," ","readme"]},"."]}]}],"frontmatter":{"title":"Deploying a devfile registry","description":"Deploying a devfile registry"},"file":{"path":"/docs/2.2.0-alpha/deploying-a-devfile-registry.md"}}},"__N_SSG":true}