{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["To incorporate custom tools into the workspace, define an image-based"," ","configuration of a container in a workspace. Define this configuration"," ","by using the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," component type."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"prerequisites"},"children":["Prerequisites"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A devfile can contain one or more components of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," type."," ","The ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["component name"]}," attribute identifies each component, including the"," ","container."]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./versions"},"children":["Adding schema version"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./metadata"},"children":["Adding a name"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./adding-components"},"children":["Adding components"]}]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Define a component using the type ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"A container component","filename":"devfile.yaml"},"children":["components:\n  - name: maven\n    container:\n    image: eclipse/maven-jdk8:latest\n    volumeMounts:\n      - name: mavenrepo\n        path: /root/.m2\n      env:\n        - name: ENV_VAR\n          value: value\n      endpoints:\n        - name: maven-server\n          targetPort: 3101\n          protocol: https\n          secure: 'true'\n          exposure: public\n      memoryRequest: 256M\n      memoryLimit: 1536M\n      cpuRequest: 0.1\n      cpuLimit: 0.5\n      command: ['tail']\n      args: ['-f', '/dev/null']\n"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"A minimal container component","filename":"devfile.yaml"},"children":["schemaVersion: 2.2.0\nmetadata:\n  name: mydevfile\ncomponents:\n  - name: go\n    container:\n      image: golang\n      memoryLimit: 512Mi\n      command: ['sleep', 'infinity']\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Specify the type of component using the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," attribute. Use"," ","the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]}," attribute to specify the image for the component. When"," ","defining the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]},", use container naming conventions. For example,"," ","the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]}," attribute in the preceding example refers to the"," ","container image, ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["docker.io/library/golang:latest"]},"."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Use the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," component to augment the image with additional"," ","resources and information. This component allows you to integrate"," ","the tooling provided by the image with the application that consumes"," ","the devfile."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Mounting project sources"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," component to have access to the project sources,"," ","you must set the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["mountSources"]}," attribute to ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["true"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["schemaVersion: 2.2.0\nmetadata:\n  name: mydevfile\ncomponents:\n  - name: go\n    container:\n      image: golang\n      memoryLimit: 512Mi\n      mountSources: true\n      command: ['sleep', 'infinity']\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The sources are mounted on a location stored in the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["PROJECTS_ROOT"]}," ","environment variable that is made available in the running container"," ","of the image. This location defaults to ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["/projects"]},". If"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["sourceMapping"]}," is defined in the container, it overrides the"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["PROJECT_ROOT"]}," value and mounts the source to the path defined by"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["sourceMapping"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Specify a volume"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," component to have a shared volume. You must"," ","define a volume component in the devfile, and reference the volume"," ","using ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["volumeMount"]}," in container component. For more information on"," ","volume component, see ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./adding-a-volume-component"},"children":["adding a volume component"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["components:\n  - name: mycontainer\n    container:\n      image: java11-maven:next\n      memoryLimit: 768Mi\n      mountSources: true\n      volumeMounts:\n        - name: m2\n          path: /home/user/.m2\n  - name: m2\n    volume:\n      size: 1Gi\n"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Container Entrypoint"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Use the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["command"]}," attribute of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," type to modify the"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["entrypoint"]}," command of the container created from the image. The"," ","availability of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["sleep"]}," command and the support for the"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["infinity"]}," argument depend on the base image used in the particular"," ","images."]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"additional-resources"},"children":["Additional Resources"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./devfile-schema"},"children":["API Reference"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./resources"},"children":["Devfile resources"]}]}]}]}],"frontmatter":{"title":"Adding a container component","description":"Adding a container component"},"file":{"path":"/docs/2.2.0-alpha/adding-a-container-component.md"}}},"__N_SSG":true}