{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["This section describes how to add an event to a v2.x devfile. An event"," ","can have three different type of objects:"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["preStartObject"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["postStartObject"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["preStopObject"]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"pre-start-object"},"children":["preStartObject"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["You can execute preStart events as init containers for the project pod"," ","in the order you specify the preStart events. The devfile ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["commandLine"]}," ","and ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["workingDir"]}," are the commands for the init container. As a result,"," ","the init container overwrites either the devfile or the container image"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["command"]}," and ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["args"]},". If you use a composite command with"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["parallel: true"]},", the composite command executes as Kubernetes init"," ","containers."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"post-start-object"},"children":["postStartObject"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["When you create the Kubernetes deployment for the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["odo"]}," component,"," ","execute the postStart events."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"pre-stop-object"},"children":["preStopObject"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Before you delete the Kubernetes deployment for the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["odo"]}," component,"," ","execute the preStop events."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["See the following list for event properties in a devfile:"]},{"$$mdtype":"Tag","name":"h4","attributes":{},"children":["envObject"]},{"$$mdtype":"Tag","name":"Table","attributes":{},"children":[{"$$mdtype":"Tag","name":"thead","attributes":{},"children":[{"$$mdtype":"Tag","name":"tr","attributes":{},"children":[{"$$mdtype":"Tag","name":"Th","attributes":{"width":"25%","scope":"col"},"children":["Key "]},{"$$mdtype":"Tag","name":"Th","attributes":{"width":"25%","scope":"col"},"children":["Type "]},{"$$mdtype":"Tag","name":"Th","attributes":{"width":"25%","scope":"col"},"children":["Required "]},{"$$mdtype":"Tag","name":"Th","attributes":{"width":"25%","scope":"col"},"children":["Description "]}]}]},{"$$mdtype":"Tag","name":"tbody","attributes":{},"children":[{"$$mdtype":"Tag","name":"tr","attributes":{},"children":[{"$$mdtype":"Tag","name":"td","attributes":{},"children":["name"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["string"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["yes"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["The name of the environment variable."]}]},{"$$mdtype":"Tag","name":"tr","attributes":{},"children":[{"$$mdtype":"Tag","name":"td","attributes":{},"children":["value"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["string"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["yes"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["The value of the environment variable."]}]}]}]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Add an ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["events"]}," section in the devfile, containing a list of"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["preStart"]}," and ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["postStart"]}," commands."]}]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["commands:\n  - id: init-project\n    apply:\n      component: tools\n  - id: copy-artifacts\n    exec:\n      component: tools\n      commandLine: 'cp files'\n      workingDir: $PROJECTS_ROOT\n  - id: init-cache\n    exec:\n      component: tools\n      commandLine: 'init cache'\n      workingDir: /.m2\n  - id: pre-compile-cmd\n    composite:\n      commands:\n        - copy-artifacts\n        - init-cache\nevents:\n  preStart:\n    - init-project\n  postStart:\n    - pre-compile-cmd\n"]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"additional-resources"},"children":["Additional resources"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For more information on adding event bindings, see ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://github.com/devfile/api/issues/32"},"children":["lifecycle bindings"," ","to bind commands"]},"."]}],"frontmatter":{"title":"Adding event bindings","description":"Adding event bindings"},"file":{"path":"/docs/2.2.0-alpha/adding-event-bindings.md"}}},"__N_SSG":true}