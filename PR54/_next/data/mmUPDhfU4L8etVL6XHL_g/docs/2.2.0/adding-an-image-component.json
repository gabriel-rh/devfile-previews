{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["You can add an ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]}," component to a devfile."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"prerequisites"},"children":["Prerequisites"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./versions"},"children":["Adding schema version"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./metadata"},"children":["Adding a name"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./adding-components"},"children":["Adding components"]}]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Define a component using the type ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]},"."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Specify the location of the Dockerfile using the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["uri"]}," property."," ","Specify arguments to be passed during the build with ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["args"]},"."," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["buildContext"]}," is the path of source directory to establish build"," ","context. If ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["rootRequired"]}," is set to true, a privileged builder pod"," ","is required. The built container will be stored in the image"," ","provided by ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["imageName"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"An image dockerfile component","filename":"devfile.yaml"},"children":["components:\n  - name: outerloop-build\n    image:\n      imageName: python-image:latest\n      autoBuild: true\n      dockerfile:\n        uri: docker/Dockerfile\n        args:\n          - 'MY_ENV=/home/path'\n        buildContext: .\n        rootRequired: false\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Alternatively, specify ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["git"]}," and ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["devfileRegistry"]}," as the image"," ","source."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["When specifying ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["git"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["fileLocation"]}," refers to the location of the"," ","Dockerfile in the git repository. Specify the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["remotes"]}," for the git"," ","repository and a ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["checkoutFrom"]}," to indicate which ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["revision"]}," to"," ","check the source from."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"An image dockerfile component with git source","filename":"devfile.yaml"},"children":["components:\n  - name: outerloop-build\n    image:\n      imageName: python-image:latest\n      dockerfile:\n        git:\n          fileLocation: 'uri/Dockerfile'\n          checkoutFrom:\n            revision: 'main'\n            remote: 'origin'\n          remotes:\n            'origin': 'https://github.com/myorg/myrepo'\n        buildContext: .\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["When specifying ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["devfileRegistry"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["id"]}," refers to the Id in a"," ","devfile registry that contains a Dockerfile. ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["registryUrl"]}," refers to"," ","the Devfile Registry URL to pull the Dockerfile from"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"An image dockerfile component with devfileRegistry source","filename":"devfile.yaml"},"children":["components:\n  - name: outerloop-build\n    image:\n      imageName: python-image:latest\n      dockerfile:\n        devfileRegistry:\n          id: python\n          registryUrl: myregistry.devfile.com\n        buildContext: .\n"]}]}]}],"frontmatter":{"title":"Adding an image component","description":"Adding an image component"},"file":{"path":"/docs/2.2.0/adding-an-image-component.md"}}},"__N_SSG":true}