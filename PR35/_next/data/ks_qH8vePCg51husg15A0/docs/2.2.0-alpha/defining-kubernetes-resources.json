{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["This section explains how to reference Kubernetes or OpenShift resource"," ","lists in devfiles in order to describe complex deployments."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Because a devfile is internally represented as a single deployment,"," ","all resources from the Kubernetes or OpenShift list merge into that"," ","single deployment."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Avoid name conflicts when designing such lists."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["When running devfiles on a Kubernetes cluster, only Kubernetes lists"," ","are supported. When running devfiles on an OpenShift cluster, both"," ","Kubernetes and OpenShift lists are supported."]}]}]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The following component references a file that is relative to the"," ","location of the devfile:"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["schemaVersion: 2.2.0\nmetadata:\n  name: mydevfile\nprojects:\n  - name: my-go-project\n    clonePath: go/src/github.com/acme/my-go-project\n    git:\n      remotes:\n        origin: 'https://github.com/acme/my-go-project.git'\ncomponents:\n  - name: mycomponent\n    kubernetes:\n      uri: ../relative/path/postgres.yaml\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The following is an example of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["postgres.yaml"]}," file:"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"postgres.yaml"},"children":["apiVersion: v1\nkind: List\nitems:\n  - apiVersion: v1\n    kind: Deployment\n    metadata:\n      name: postgres\n      labels:\n        app: postgres\n    spec:\n      template:\n        metadata:\n          name: postgres\n          app:\n            name: postgres\n        spec:\n          containers:\n            - image: postgres\n              name: postgres\n              ports:\n                - name: postgres\n                  containerPort: 5432\n                  volumeMounts:\n                    - name: pg-storage\n                      mountPath: /var/lib/postgresql/data\n          volumes:\n            - name: pg-storage\n              persistentVolumeClaim:\n                claimName: pg-storage\n  - apiVersion: v1\n    kind: Service\n    metadata:\n      name: postgres\n      labels:\n        app: postgres\n        name: postgres\n    spec:\n      ports:\n        - port: 5432\n          targetPort: 5432\n  - apiVersion: v1\n    kind: PersistentVolumeClaim\n    metadata:\n      name: pg-storage\n      labels:\n        app: postgres\n    spec:\n      accessModes:\n        - ReadWriteOnce\n      resources:\n        requests:\n          storage: 1Gi\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For a basic example of a devfile with an associated Kubernetes or"," ","OpenShift list, see"," ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://github.com/devfile-samples/devfile-sample-python-basic"},"children":["Python Devfile Sample"]},"."]}],"frontmatter":{"title":"Defining kubernetes resources","description":"Defining kubernetes resources"},"file":{"path":"/docs/2.2.0-alpha/defining-kubernetes-resources.md"}}},"__N_SSG":true}