{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Complex deployments can be described using Kubernetes or OpenShift"," ","resource lists that can be referenced in the devfile. This makes them a"," ","part of the workspace"]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Because a {prod-short} workspace is internally represented as a single deployment, all resources from the Kubernetes or OpenShift list are merged into that single deployment."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Be careful when designing such lists because this can result in name"," ","conflicts and other problems."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Only the following subset of the Kubernetes objects are supported:"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["deployments"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["pods"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["services"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["persistent volume claims"]},","," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["secrets"]},", and ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["config maps"]},". Kubernetes Ingresses are ignored, but"," ","OpenShift routes are supported. A workspace created from a devfile"," ","using any other object types fails to start."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["When running {prod-short} on a Kubernetes cluster, only Kubernetes lists are supported. When running"," ","{prod-short} on an OpenShift cluster, both Kubernetes and OpenShift lists are supported."]}]}]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["schemaVersion: 2.1.0\nmetadata:\n  name: mydevfile\nprojects:\n  - name: my-go-project\n    clonePath: go/src/github.com/acme/my-go-project\n    git:\n      remotes:\n        origin: \"https://github.com/acme/my-go-project.git\"\ncomponents:\n  - name: mydevfile\n    kubernetes:\n      uri: ../relative/path/postgres.yaml\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The following is an example of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["postgres.yaml"]}," file."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["apiVersion: v1\nkind: List\nitems:\n  - apiVersion: v1\n    kind: Deployment\n    metadata:\n      name: postgres\n      labels:\n        app: postgres\n    spec:\n      template:\n        metadata:\n          name: postgres\n          app:\n            name: postgres\n        spec:\n          containers:\n            - image: postgres\n              name: postgres\n              ports:\n                - name: postgres\n                  containerPort: 5432\n                  volumeMounts:\n                    - name: pg-storage\n                      mountPath: /var/lib/postgresql/data\n          volumes:\n            - name: pg-storage\n              persistentVolumeClaim:\n                claimName: pg-storage\n  - apiVersion: v1\n    kind: Service\n    metadata:\n      name: postgres\n      labels:\n        app: postgres\n        name: postgres\n    spec:\n      ports:\n        - port: 5432\n          targetPort: 5432\n  - apiVersion: v1\n    kind: PersistentVolumeClaim\n    metadata:\n      name: pg-storage\n      labels:\n        app: postgres\n    spec:\n      accessModes:\n        - ReadWriteOnce\n      resources:\n        requests:\n          storage: 1Gi\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For a basic example of a devfile with an associated Kubernetes or"," ","OpenShift list, see"," ",{"$$mdtype":"Tag","name":"Link","attributes":{"href":"https://github.com/redhat-developer/devfile/tree/master/samples/web-nodejs-with-db-sample"},"children":["web-nodejs-with-db-sample"]}," ","on redhat-developer GitHub."]}],"frontmatter":{"title":"Defining kubernetes resources","description":"Defining kubernetes resources"},"file":{"path":"/docs/2.1.0/defining-kubernetes-resources.md"}}},"__N_SSG":true}