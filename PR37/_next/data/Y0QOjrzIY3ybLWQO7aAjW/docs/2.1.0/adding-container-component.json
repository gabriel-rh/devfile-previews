{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A component type that allows to define a container image-based"," ","configuration of a container in a workspace. A devfile can contain one"," ","or more component(s) of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," type. The ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," type of"," ","component brings in custom tools into the workspace. The component is"," ","identified by its image."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"prerequisites"},"children":["Prerequisites"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./versions"},"children":["Adding schema version"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./metadata"},"children":["Adding a name"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./adding-components"},"children":["Adding components"]}]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Define a component using the type ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"A container component","filename":"devfile.yaml"},"children":["components:\n  - name: maven\n    container:\n    image: eclipse/maven-jdk8:latest\n    volumeMounts:\n      - name: mavenrepo\n        path: /root/.m2\n      env:\n        - name: ENV_VAR\n          value: value\n      endpoints:\n        - name: maven-server\n          targetPort: 3101\n          protocol: https\n          secure: 'true'\n          exposure: public\n      memoryRequest: 256M\n      memoryLimit: 1536M\n      cpuRequest: 0.1\n      cpuLimit: 0.5\n      command: ['tail']\n      args: ['-f', '/dev/null']\n"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"A minimal container component","filename":"devfile.yaml"},"children":["schemaVersion: 2.1.0\nmetadata:\n    name: mydevfile\ncomponents:\n  - name: go\n    container:\n      image: golang\n      memoryLimit: 512Mi\n      command: ['sleep', 'infinity']\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["It specifies the type of the component, ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," and the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]}," ","attribute names the image to be used for the component using the"," ","usual Docker naming conventions, that is, the above ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["image"]}," ","attribute is equal to ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["docker.io/library/golang:latest"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Mounting project sources"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," component to have access to the project sources,"," ","you must set the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["mountSources"]}," attribute to ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["true"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["    schemaVersion: 2.1.0\n    metadata:\n        name: mydevfile\n    components:\n      - name: go\n        container:\n          image: golang\n          memoryLimit: 512Mi\n          mountSources: true\n          command: ['sleep', 'infinity']\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The sources is mounted on a location stored in the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["PROJECTS_ROOT"]}," ","environment variable that is made available in the running container"," ","of the image. This location defaults to ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["/projects"]},". If"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["sourceMapping"]}," is defined in the container, it overrides the"," ",{"$$mdtype":"Tag","name":"em","attributes":{},"children":["PROJECT_ROOT"]}," value if present and mounts the source to the path"," ","defined by ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["sourceMapping"]},"."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Container Entrypoint"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Use the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["command"]}," attribute of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["container"]}," type to modify the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["entrypoint"]}," command of the container created from the image. The availability of the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["sleep"]}," command and the support for the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["infinity"]}," argument depend on the base image used in the particular images."]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"additional-resources"},"children":["Additional Resources"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./devfile-schema"},"children":["API reference"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./resources"},"children":["Devfile resources"]}]}]}]}],"frontmatter":{"title":"Adding container component","description":"Adding container component"},"file":{"path":"/docs/2.1.0/adding-container-component.md"}}},"__N_SSG":true}