{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A devfile allows to specify commands to be available for execution in a"," ","workspace. Every command can contain a subset of actions, which are"," ","related to a specific component in whose container it will be executed."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"prerequisites"},"children":["Prerequisites"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./versions"},"children":["Adding schema version"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./metadata"},"children":["Adding a name"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./adding-projects"},"children":["Adding projects"]}]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"procedure"},"children":["Procedure"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Add a ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["commands"]}," section in the devfile, containing a list of one or"," ","more commands."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For each command, define an unique value for the mandatory ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["id"]}," ","attribute."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For each command, define a mandatory type of one of the following"," ","types: ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["exec"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["apply"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["composite"]},", or ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["vscode-tasks"]},"."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","title":"Sample command","filename":"devfile.yaml"},"children":["commands:\n  - id: build\n    exec:\n    component: mysql\n    commandLine: mvn clean\n    workingDir: /projects/spring-petclinic\n"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Define attributes for the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["exec"]}," command to run using the default"," ","shell in the container."]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["commandLine"]}," attribute that is a command to execute."]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["component"]}," attribute that specifies the container in which to"," ","execute the command."]}]}]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["schemaVersion: 2.1.0\nmetadata:\n  name: mydevfile\nprojects:\n  - name: my-go-project\n    clonePath: go/src/github.com/acme/my-go-project\n    git:\n      remotes:\n        origin: \"https://github.com/acme/my-go-project.git\"\ncomponents:\n  - name: go-cli\n    container:\n      image: golang\n      memoryLimit: 512Mi\n      mountSources: true\n      command: ['sleep', 'infinity']\n      env:\n        - name: GOPATH\n          value: $(PROJECTS_ROOT)/go\n        - name: GOCACHE\n          value: /tmp/go-cache\ncommands:\n  - id: compile and run\n    exec:\n      component: go-cli\n      commandLine: \"go get -d && go run main.go\"\n      workingDir: \"${PROJECTS_ROOT}/src/github.com/acme/my-go-project\"\n"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["A command can have only one action, though you can use"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["composite"]}," commands to execute several commands either"," ","sequentially or in parallel."]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Command group"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A given command can be assigned to one or more groups that"," ","represents the nature of the command. The support groups are:"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["build"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["run"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["test"]}," and ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["debug"]},". For each of the groups, one"," ","default command can be defined in each group by specifying the"," ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["isDefault"]}," value."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["schemaVersion: 2.1.0\nmetadata:\n  name: mydevfile\nprojects:\n  - name: my-maven-project\n    clonePath: maven/src/github.com/acme/my-maven-project\n    git:\n      remotes:\n        origin: \"https://github.com/acme/my-maven-project.git\"\ncomponents:\n  - name: maven\n    container:\n      image: eclipse/maven-jdk8:latest\n      mountSources: true\n      command: ['tail']\ncommands:\n  - id: package\n    exec:\n      component: maven\n      commandLine: \"mvn package\"\n      group:\n        kind: build\n  - id: install\n    exec:\n      component: maven\n      commandLine: \"mvn install\"\n      group:\n        kind: build\n        isDefault: true\n"]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Composite command"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A composite command can be defined to chain multiple commands"," ","together. The individual commands that are called from a composite"," ","command can be referenced by the ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["name"]}," of the command. A ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["parallel"]}," ","boolean can be specified to determine if the commands within a"," ","composite command are being executed sequentially or in parallel."]},{"$$mdtype":"Tag","name":"Fence","attributes":{"language":"yaml","filename":"devfile.yaml"},"children":["schemaVersion: 2.1.0\nmetadata:\n  name: mydevfile\nprojects:\n  - name: my-maven-project\n    clonePath: maven/src/github.com/acme/my-maven-project\n    git:\n      remotes:\n        origin: \"https://github.com/acme/my-maven-project.git\"\ncomponents:\n  - name: maven\n    container:\n      image: eclipse/maven-jdk8:latest\n      mountSources: true\n      command: ['tail']\ncommands:\n  - id: package\n    exec:\n      component: maven\n      commandLine: \"mvn package\"\n      group:\n        kind: build\n  - id: install\n    exec:\n      component: maven\n      commandLine: \"mvn install\"\n      group:\n        kind: build\n        isDefault: true\n  - id: installandpackage\n    composite:\n      commands:\n        - install\n        - package\n      parallel: false\n"]}]}]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"additional-resources"},"children":["Additional Resources"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./devfile-schema"},"children":["API reference"]}]}]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":[{"$$mdtype":"Tag","name":"Link","attributes":{"href":"./resources"},"children":["Devfile resources"]}]}]}]}],"frontmatter":{"title":"Adding commands","description":"Adding commands"},"file":{"path":"/docs/2.1.0/adding-commands.md"}}},"__N_SSG":true}